@{
    ViewData["Title"] = "Debug Info";
}

<div class="container mt-5">
    <h1>Debug Information</h1>
    
    <div class="alert alert-info">
        <h5>1. Environment Check</h5>
        <p>Environment: @System.Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT")</p>
        <p>User Authenticated: @User.Identity?.IsAuthenticated</p>
        <p>User Name: @User.Identity?.Name</p>
    </div>

    <div class="alert alert-warning">
        <h5>2. Form Test - POST Method Test</h5>
        <form method="post" action="/Home/DebugPost">
            @Html.AntiForgeryToken()
            <input type="text" name="testInput" placeholder="Test input" class="form-control mb-2" />
            <button type="submit" class="btn btn-primary">Send Test POST</button>
        </form>
    </div>

    <div class="alert alert-secondary">
        <h5>3. Network Test</h5>
        <button type="button" class="btn btn-info" onclick="testAjax()">Test AJAX Request</button>
        <div id="ajaxResult" class="mt-2"></div>
    </div>

    <script>
        function testAjax() {
            console.log('AJAX test started');
            fetch('/Home/DebugAjax', {
                method: 'GET'
            })
            .then(response => {
                console.log('Response received:', response);
                return response.text();
            })
            .then(data => {
                console.log('Data:', data);
                document.getElementById('ajaxResult').innerHTML = `<p>${data}</p>`;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('ajaxResult').innerHTML = `<p class="text-danger">Error: ${error.message}</p>`;
            });
        }
    </script>
</div>
